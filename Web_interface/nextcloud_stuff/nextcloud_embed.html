<audio controls>
    <source src="https://hub.bio.ens.psl.eu/index.php/s/2WmCQGSBccCiitw" type="audio/mp3">
    Your browser does not support the audio element.
  </audio>
<video controls width="400" height="300">
    <source src="https://hub.bio.ens.psl.eu/index.php/s/2WmCQGSBccCiitw/download?path=&files=" type="video/mp4">
    Your browser does not support the video tag.
</video>
<a target="_blank" rel="noreferrer noopener" href="https://nextcloud.com/sharing#emanuell@hub.bio.ens.psl.eu" style="padding:10px;background-color:#0082c9;color:#ffffff;border-radius:3px;padding-left:4px;">
	<span style="background-image:url(https://hub.bio.ens.psl.eu/index.php/apps/theming/image/logo?useSvg=1&v=4);width:50px;height:30px;position:relative;top:8px;background-size:contain;display:inline-block;background-repeat:no-repeat; background-position: center center;"></span>
	Share with me via Nextcloud
</a>

<script>

import { createClient } from 'webdav'
import { generateRemoteUrl } from '@nextcloud/router'
import { getCurrentUser } from '@nextcloud/auth'

async function fetchDirectoryContents() {
  const client = createClient(generateRemoteUrl('dav'))

  try {
    const response = await client.getDirectoryContents(`/files/${getCurrentUser()?.uid}/folder`, {
      details: true,
      data: `<?xml version="1.0" encoding="UTF-8"?>
              <d:propfind xmlns:d="DAV:" xmlns:oc="http://owncloud.org/ns" xmlns:nc="http://nextcloud.org/ns">
                <d:prop>
                  <d:getlastmodified/>
                  <d:getcontentlength/>
                  <d:getcontenttype/>
                  <oc:permissions/>
                  <d:resourcetype/>
                  <d:getetag/>
                </d:prop>
              </d:propfind>`
    })

    console.log(response)
    // Process the response here
  } catch (error) {
    console.error('Error fetching directory contents:', error)
  }
}

fetchDirectoryContents()

    </script>